# 手写数字识别可视化工具

这是一个交互式的手写数字识别可视化应用，允许你在画布上绘制数字，并实时查看模型的预测结果和概率分布。

## 功能特点

- 📝 **交互式绘图**: 在 400x400 的画布上自由绘制数字
- 🎯 **实时识别**: 绘制完成后自动识别数字
- 📊 **概率分布**: 显示所有数字（0-9）的预测概率
- 🎨 **友好界面**: 简洁美观的图形用户界面
- 🚀 **快速响应**: 支持 CPU 和 GPU 加速

## 使用方法

### 1. 启动应用

```bash
# 在项目根目录下运行
python visualize/digit_painter.py
```

### 2. 操作说明

1. **绘制数字**: 在左侧黑色画布上用鼠标绘制数字（按住鼠标左键拖动）
2. **查看结果**: 右侧会显示识别的数字和置信度
3. **查看概率**: 下方显示所有数字的概率分布条形图
4. **清除画布**: 点击"清除"按钮清空画布
5. **重新识别**: 点击"识别"按钮手动触发识别

### 3. 界面说明

- **左侧画板**: 400x400 像素的绘图区域，笔刷大小为 20 像素
- **右侧结果区**:
  - 大字体显示预测的数字
  - 显示预测的置信度百分比
  - 显示所有数字（0-9）的概率分布
  - 预测数字对应的概率条会标红突出显示

## 技术实现

- **GUI 框架**: Tkinter（Python 标准库）
- **图像处理**: PIL (Pillow)
- **深度学习**: PyTorch
- **模型**: 支持 CNN 和 MLP 模型

## 工作原理

1. 用户在画布上绘制数字
2. 绘制完成后，自动触发预测流程
3. 将 400x400 的画布图像预处理：
   - 反转颜色（黑底白字 → 白底黑字）
   - 缩放到 28x28 像素
   - 归一化到 [0, 1] 范围
   - 根据模型类型 reshape
4. 输入到训练好的模型进行预测
5. 使用 softmax 计算概率分布
6. 在界面上显示结果

## 注意事项

- 确保已训练好的模型文件存在于配置文件指定的路径
- 支持 `models/best_model.pth` 默认路径
- 模型类型由 `config/config.yaml` 配置文件决定
- 建议在绘制时尽量居中，笔画清晰
- 数字大小适中，不要太小或太大

## 快捷提示

- 💡 绘制完毕后会自动识别，无需手动点击"识别"按钮
- 💡 可以随时点击"清除"按钮重新绘制
- 💡 观察概率分布可以了解模型对各个数字的判断情况
- 💡 如果识别不准确，可以尝试调整数字的大小和位置

